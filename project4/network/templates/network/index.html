{% extends "network/layout.html" %}
{% load static %}

{% block body %}
    {% if post_form %}
        <h2>New Post</h2>
        <form action="{% url 'create_post' %}" method="post">
            {% csrf_token %}
            {{ post_form }}
            <input type="submit" value="Submit">
        </form>
    {% else %}
        <h2>Following</h2>
    {% endif %}

    {% for p in posts %}
        <a href="{% url 'profile' p.user.pk %}"><h3>{{ p.user.username }}</h3></a>
        <h4>{{  p.created_timestamp }}</h4>
        <p>{{ p.content }}</p>
        <p>Likes: <span class="like-count" data-post-id={{ p.pk }}>{{ p.like_count }}</span></p>
        <form class="like-form" data-post-id={{ p.pk }} method="POST" action="{% url 'like' p.pk%}">
          {% csrf_token %}
          <input type="submit" value="Like">
        </form>
    {% endfor %}


    <nav aria-label="Page navigation example">
        <ul class="pagination">
          <li class="page-item"><a class="page-link" href="{% url from_view prev_page %}">Previous</a></li>
          {% for pn in page_nums %}
            <li class="page-item"><a class="page-link" href="{% url from_view pn %}">{{ pn }}</a></li>
          {% endfor %}
          <li class="page-item"><a class="page-link" href="{% url from_view next_page %}">Next</a></li>
        </ul>
      </nav>
{% endblock %}

{% block script %}
    <script src="{% static 'network/js/main.js' %}"></script>
{% endblock %}